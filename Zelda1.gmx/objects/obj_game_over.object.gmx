<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Properties
image_speed=.2;
selection=0;
timeline_index=tml_game_over;
timeline_running=true;
timeline_position=0;
timeline_speed=1;
timer=0;

start_color=background_color;
end_color=c_black;
fade_length=.5*room_speed;

p_room=noone;
menu_show=false;
game_over_show=false;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Save Game
var _file;
switch(Active_Save_Slot)
{
    case 0: _file="Save1.sav";break;
    case 1: _file="Save2.sav";break;
    case 2: _file="Save3.sav";break;
}

ds_map_secure_save(obj_game_manager.save_data,_file)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Menu controls
if(menu_show)
{
    obj_link.visible=false;
    
    if(system_button_up_pressed || system_button_down_pressed)
    {
        sfx_play("Cursor");
        selection = !selection;
    }
        
    ///Read Menu Controls
    if(system_button_start_pressed || system_button_okay_pressed)
    {
        if(selection==1)
        {
            ///Need to make this transition smoother.
            game_restart();
        }
        else if(selection==0)
        {   //Restart
            sfx_play("Select");
            if(p_room != noone)
            {
                var _trans = transition_create(room_speed,.5*room_speed,room_speed);
                transition_add_fade_out(_trans);
                transition_add_spotlight_in(_trans,"Link");
                transition_add_room_change(_trans,p_room);
                transition_move_link(_trans,"Stand",-1,"Game Start","Stand",-1,false);
                transition_add_music_change(_trans,true);
                //var i=room_transition_general(other.p_room,0,transition_fade,1,"",.5,transition_spotlight,1,"Game Start");
                //room_transition_change_music(i,true);
                
            }
            else
                show_message("Oh shit.  We died in a room but don't know which room to go back to.  Fuck.");
            with(obj_game_manager)
            {
                state_next=game_state_in_game;
                game_started=false;
            }
        }
    }
}

if(timeline_position=1)
{
    if(timer!=fade_length)
        timeline_position=timeline_position-timeline_speed;
    else
        timeline_position=2;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Menu
if(menu_show)
{
    ///Draw Options
    draw_set_text_alignment(8);
    draw_set_font(fnt_text)
    var _continue_w=string_width("Continue");
    draw_text_stroked(screen_width*.5,screen_height*.5,"Continue",c_white,c_navy,1,1);
    draw_text_stroked(screen_width*.5,screen_height*.5+16,"Quit",c_white,c_navy,1,1);
    draw_set_font(fnt_small);
    draw_text_stroked(screen_width*.5,screen_height*.5+64,"(Game will be saved regardless)",c_white,c_navy,1,1);
    
    //Draw Fairy
    var _xoff=12;
    if(selection==0)
        draw_sprite(spr_fairy,image_index,screen_width*.5-_continue_w*.5-_xoff,screen_height*.5+16);
    else
        draw_sprite(spr_fairy,image_index,screen_width*.5-_continue_w*.5-_xoff,screen_height*.5+32);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
